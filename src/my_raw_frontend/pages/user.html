<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guardian Profile - Coastal Guardian</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* Coastal Guardian Theme Variables */
        :root {
            --primary-ocean: #0B4D68;
            --deep-sea: #1B5E7A;
            --ocean-blue: #2E86AB;
            --sea-foam: #A8DADC;
            --coral-reef: #F1FAEE;
            --wave-crest: #E9F7F7;
            --seafoam-green: #457B9D;
            --tidal-pool: #1D3557;
            --shell-white: #FDFDFD;
            --coral-blush: #FFE2DB;
            --sand-beige: #F5F1EA;
            --ocean-accent: #68A6AD;
            --white: #FFFFFF;
            --dark-text: #1D3557;
            --medium-text: #457B9D;
            --light-text: #2E86AB;
            --success-green: #4CAF50;
            --warning-orange: #FF9800;
            --error-red: #F44336;
            --gradient-primary: linear-gradient(135deg, #1D3557 0%, #0B4D68 50%, #2E86AB 100%);
            --gradient-secondary: linear-gradient(135deg, #A8DADC 0%, #F1FAEE 50%, #E9F7F7 100%);
            --gradient-accent: linear-gradient(135deg, #457B9D 0%, #2E86AB 100%);
            --gradient-wave: linear-gradient(135deg, #A8DADC 0%, #F1FAEE 100%);
            --shadow-soft: 0 4px 20px rgba(29, 53, 87, 0.1);
            --shadow-medium: 0 8px 30px rgba(29, 53, 87, 0.15);
            --shadow-strong: 0 15px 40px rgba(29, 53, 87, 0.2);
            --background: linear-gradient(135deg, #F1FAEE 0%, #E9F7F7 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--background);
            color: var(--dark-text);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Container and Layout */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            min-height: 100vh;
        }

        /* Profile Container */
        .profile-container {
            background: var(--white);
            border-radius: 24px;
            box-shadow: var(--shadow-medium);
            overflow: hidden;
            position: relative;
        }

        /* Return Button - Inside Container */
        .return-button {
            position: absolute;
            top: 2rem;
            left: 2rem;
            background: var(--shell-white);
            border: 1px solid var(--sea-foam);
            border-radius: 12px;
            padding: 0.75rem 1.5rem;
            color: var(--medium-text);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-soft);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            z-index: 10;
            cursor: pointer;
        }

        .return-button:hover {
            background: var(--wave-crest);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
            color: var(--primary-ocean);
        }

        /* Profile Header */
        .profile-header {
            background: var(--gradient-wave);
            padding: 4rem 2rem 3rem;
            text-align: center;
            position: relative;
        }

        .profile-header::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--sea-foam), transparent);
        }

        .avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--gradient-accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--white);
            margin: 0 auto 1.5rem;
            border: 4px solid var(--white);
            box-shadow: var(--shadow-soft);
            transition: all 0.3s ease;
        }

        .avatar:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .user-name {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            font-weight: 600;
            color: var(--dark-text);
            margin-bottom: 0.5rem;
        }

        .user-role {
            font-size: 1.1rem;
            color: var(--medium-text);
            font-weight: 500;
            opacity: 0.9;
        }

        /* Level Section */
        .level-section {
            padding: 2.5rem 2rem;
            background: var(--white);
            border-bottom: 1px solid var(--wave-crest);
        }

        .level-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 600px;
            margin: 0 auto;
            flex-wrap: wrap;
            gap: 2rem;
        }

        .level-info {
            text-align: center;
            flex: 1;
            min-width: 200px;
        }

        .level-label {
            font-size: 0.9rem;
            color: var(--medium-text);
            font-weight: 500;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .level-display {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-ocean);
            margin-bottom: 0.5rem;
        }

        .token-count {
            font-size: 1rem;
            color: var(--medium-text);
        }

        .progress-container {
            flex: 1;
            min-width: 200px;
        }

        .progress-label {
            font-size: 0.9rem;
            color: var(--medium-text);
            margin-bottom: 0.75rem;
            text-align: center;
        }

        .progress-ring {
            width: 100px;
            height: 100px;
            margin: 0 auto;
            position: relative;
        }

        .progress-ring svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .progress-ring-bg {
            fill: none;
            stroke: var(--wave-crest);
            stroke-width: 8;
        }

        .progress-ring-fill {
            fill: none;
            stroke: var(--ocean-blue);
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dasharray 1.5s ease-in-out;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--primary-ocean);
        }

        /* Activity Dashboard */
        .activity-dashboard {
            padding: 2.5rem 2rem;
            background: var(--shell-white);
            border-bottom: 1px solid var(--wave-crest);
        }

        .dashboard-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark-text);
            text-align: center;
            margin-bottom: 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .stat-card {
            background: var(--white);
            border: 1px solid var(--wave-crest);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-soft);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-medium);
            border-color: var(--sea-foam);
        }

        .stat-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            display: block;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-ocean);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--medium-text);
            font-weight: 500;
        }

        /* Eco-Contribution Coins Section */
        .coins-section {
            padding: 2.5rem 2rem;
            background: var(--coral-reef);
            border-bottom: 1px solid var(--wave-crest);
        }

        .coins-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark-text);
            text-align: center;
            margin-bottom: 2rem;
        }

        .coins-overview {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-soft);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 2rem;
        }

        .total-value {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .total-value-label {
            font-size: 0.9rem;
            color: var(--medium-text);
            margin-bottom: 0.5rem;
        }

        .total-value-amount {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary-ocean);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .token-icon {
            font-size: 1.8rem;
        }

        .coins-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .coin-card {
            background: var(--white);
            border: 1px solid var(--wave-crest);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-soft);
        }

        .coin-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-medium);
            border-color: var(--sea-foam);
        }

        .coin-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .coin-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-wave);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .coin-info {
            flex: 1;
        }

        .coin-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark-text);
            margin-bottom: 0.25rem;
        }

        .coin-amount {
            font-size: 0.9rem;
            color: var(--medium-text);
        }

        .coin-value {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--wave-crest);
        }

        .coin-price {
            font-size: 0.9rem;
            color: var(--medium-text);
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .coin-total {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-ocean);
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .price-change {
            font-size: 0.8rem;
            font-weight: 500;
            margin-left: 0.5rem;
        }

        .price-change.positive {
            color: var(--success-green);
        }

        .price-change.negative {
            color: var(--error-red);
        }

        /* Tokens Section */
        .tokens-section {
            padding: 3rem 2rem;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--dark-text);
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .tokens-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .token-card {
            background: var(--white);
            border: 1px solid var(--wave-crest);
            border-radius: 16px;
            padding: 2rem;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(30px);
        }

        .token-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .token-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-accent);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .token-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-medium);
            border-color: var(--sea-foam);
        }

        .token-card:hover::before {
            transform: scaleX(1);
        }

        .token-header {
            display: flex;
            align-items: flex-start;
            gap: 1.25rem;
            margin-bottom: 1.5rem;
        }

        .token-icon-card {
            width: 56px;
            height: 56px;
            background: var(--gradient-wave);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            color: var(--primary-ocean);
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .token-card:hover .token-icon-card {
            transform: scale(1.1);
            background: var(--gradient-accent);
            color: var(--white);
        }

        .token-meta {
            flex: 1;
        }

        .token-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--dark-text);
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .token-date {
            font-size: 0.9rem;
            color: var(--medium-text);
            opacity: 0.8;
        }

        .token-description {
            color: var(--medium-text);
            font-size: 0.95rem;
            line-height: 1.6;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.4s ease;
        }

        .token-card:hover .token-description {
            opacity: 1;
            max-height: 120px;
            margin-top: 1rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .return-button {
                top: 1rem;
                left: 1rem;
                padding: 0.5rem 1rem;
                font-size: 0.85rem;
            }

            .profile-header {
                padding: 3rem 1.5rem 2rem;
            }

            .user-name {
                font-size: 1.8rem;
            }

            .avatar {
                width: 100px;
                height: 100px;
                font-size: 2.5rem;
            }

            .level-container {
                flex-direction: column;
                text-align: center;
            }

            .level-section,
            .activity-dashboard,
            .coins-section,
            .tokens-section {
                padding: 2rem 1.5rem;
            }

            .stats-grid,
            .coins-grid,
            .tokens-grid {
                grid-template-columns: 1fr;
            }

            .token-card {
                padding: 1.5rem;
            }
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .token-card:focus,
        .return-button:focus {
            outline: 2px solid var(--ocean-blue);
            outline-offset: 2px;
        }

        /* Fade-in animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease-out forwards;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="profile-container">
            <!-- Return Button - Inside Container -->
            <button class="return-button" id="returnBtn">
                <span>←</span>
                Return
            </button>

            <!-- Profile Header -->
            <div class="profile-header">
                <div class="avatar" id="avatar">
                    🌊
                </div>
                <h1 class="user-name" id="userName">Rebe Kyle P. Salangad</h1>
                <p class="user-role" id="userRole">Coastal Archivist</p>
            </div>

            <!-- Level Section -->
            <div class="level-section">
                <div class="level-container">
                    <div class="level-info">
                        <div class="level-label">Guardian Level</div>
                        <div class="level-display" id="levelDisplay">Level 5</div>
                        <div class="token-count" id="tokenCount">5 Soulbound Tokens</div>
                    </div>
                    <div class="progress-container">
                        <div class="progress-label">Progress to Next Level</div>
                        <div class="progress-ring">
                            <svg>
                                <circle class="progress-ring-bg" cx="50" cy="50" r="40"></circle>
                                <circle class="progress-ring-fill" cx="50" cy="50" r="40" id="progressCircle"></circle>
                            </svg>
                            <div class="progress-text" id="progressText">5/6</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Activity Dashboard -->
            <div class="activity-dashboard">
                <h2 class="dashboard-title">Activity Overview</h2>
                <div class="stats-grid">
                    <div class="stat-card fade-in">
                        <span class="stat-icon">🏆</span>
                        <div class="stat-value" id="totalSBTs">5</div>
                        <div class="stat-label">Soulbound Tokens</div>
                    </div>
                    <div class="stat-card fade-in">
                        <span class="stat-icon">🌱</span>
                        <div class="stat-value" id="totalContributions">23</div>
                        <div class="stat-label">Contributions Made</div>
                    </div>
                    <div class="stat-card fade-in">
                        <span class="stat-icon">📅</span>
                        <div class="stat-value" id="lastActive">Dec 15</div>
                        <div class="stat-label">Last Active</div>
                    </div>
                    <div class="stat-card fade-in">
                        <span class="stat-icon">🔥</span>
                        <div class="stat-value" id="daysActive">18</div>
                        <div class="stat-label">Days This Month</div>
                    </div>
                </div>
            </div>

            <!-- Eco-Contribution Coins Section -->
            <div class="coins-section">
                <h2 class="coins-title">Eco-Contribution Portfolio</h2>
                
                <div class="coins-overview">
                    <div class="total-value">
                        <div class="total-value-label">Total Portfolio Value</div>
                        <div class="total-value-amount" id="totalPortfolioValue">
                            <span class="token-icon">🪙</span>
                            <span>75</span>
                        </div>
                    </div>
                </div>

                <div class="coins-grid" id="coinsGrid">
                    <!-- Coin cards will be populated by JavaScript -->
                </div>
            </div>

            <!-- Tokens Section -->
            <div class="tokens-section">
                <h2 class="section-title">Soulbound Token Collection</h2>
                <div class="tokens-grid" id="tokensGrid">
                    <!-- Tokens will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        /**
         * Coastal Guardian Profile Management System
         * Comprehensive profile interface with SBTs, activity stats, and eco-contribution coins
         */

        class CoastalGuardianProfile {
            constructor() {
                // Sample Soulbound Token data
                this.tokens = [
                    {
                        id: 1,
                        title: "Ocean Steward",
                        description: "Awarded for demonstrating exceptional commitment to marine conservation through consistent participation in coastal protection initiatives and educational outreach programs.",
                        icon: "🐚",
                        dateAcquired: "2024-01-15"
                    },
                    {
                        id: 2,
                        title: "Reef Guardian",
                        description: "Earned through active participation in coral reef restoration projects, contributing to the preservation of critical marine ecosystems and biodiversity.",
                        icon: "🪸",
                        dateAcquired: "2024-03-22"
                    },
                    {
                        id: 3,
                        title: "Marine Researcher",
                        description: "Granted for valuable contributions to marine research initiatives, including data collection, analysis, and collaboration with scientific institutions.",
                        icon: "🔬",
                        dateAcquired: "2024-05-10"
                    },
                    {
                        id: 4,
                        title: "Coastal Advocate",
                        description: "Recognized for leadership in coastal advocacy efforts, promoting sustainable practices and raising awareness about marine conservation challenges.",
                        icon: "⚓",
                        dateAcquired: "2024-07-18"
                    },
                    {
                        id: 5,
                        title: "Wave Protector",
                        description: "Awarded for implementing innovative solutions to combat ocean pollution and protect marine life through community-driven conservation projects.",
                        icon: "🌊",
                        dateAcquired: "2024-09-05"
                    }
                ];

                // Sample eco-contribution coins data - values in Web3 tokens 🪙
                this.ecoCoins = [
                    {
                        id: 1,
                        name: "Seashell Coin",
                        symbol: "SHELL",
                        icon: "🐚",
                        amount: 125,
                        tokenValue: 0.15, // Value in Web3 tokens per coin
                        priceChange: 2.3
                    },
                    {
                        id: 2,
                        name: "Coral Token",
                        symbol: "CORAL",
                        icon: "🪸",
                        amount: 89,
                        tokenValue: 0.28,
                        priceChange: -1.2
                    },
                    {
                        id: 3,
                        name: "Kelp Credit",
                        symbol: "KELP",
                        icon: "🌿",
                        amount: 210,
                        tokenValue: 0.08,
                        priceChange: 5.7
                    },
                    {
                        id: 4,
                        name: "Tide Token",
                        symbol: "TIDE",
                        icon: "🌊",
                        amount: 67,
                        tokenValue: 0.22,
                        priceChange: 0.8
                    }
                ];

                // Activity stats
                this.activityStats = {
                    totalContributions: 23,
                    lastActiveDate: "2024-12-15",
                    daysActiveThisMonth: 18
                };

                this.init();
            }

            /**
             * Initialize the profile interface
             */
            init() {
                this.updateLevelDisplay();
                this.updateActivityStats();
                this.renderEcoCoins();
                this.renderTokens();
                this.bindEvents();
                this.setupScrollAnimations();
                this.startMarketUpdates();
            }

            /**
             * Calculate user level based on number of tokens
             * Simple formula: Level = Number of Tokens (minimum level 1)
             */
            calculateLevel() {
                return Math.max(1, this.tokens.length);
            }

            /**
             * Calculate progress to next level
             */
            calculateProgress() {
                const currentTokens = this.tokens.length;
                const nextLevelTokens = currentTokens + 1;
                const progress = currentTokens / nextLevelTokens;
                return {
                    current: currentTokens,
                    next: nextLevelTokens,
                    percentage: Math.round(progress * 100)
                };
            }

            /**
             * Update the level display and progress indicator
             */
            updateLevelDisplay() {
                const level = this.calculateLevel();
                const progress = this.calculateProgress();
                
                // Update level display
                document.getElementById('levelDisplay').textContent = `Level ${level}`;
                document.getElementById('tokenCount').textContent = 
                    `${this.tokens.length} Soulbound Token${this.tokens.length !== 1 ? 's' : ''}`;
                
                // Update progress ring
                this.updateProgressRing(progress);
            }

            /**
             * Update the circular progress indicator
             */
            updateProgressRing(progress) {
                const circle = document.getElementById('progressCircle');
                const progressText = document.getElementById('progressText');
                
                const radius = 40;
                const circumference = 2 * Math.PI * radius;
                const offset = circumference - (progress.percentage / 100) * circumference;
                
                circle.style.strokeDasharray = circumference;
                circle.style.strokeDashoffset = offset;
                
                progressText.textContent = `${progress.current}/${progress.next}`;
            }

            /**
             * Update activity statistics
             */
            updateActivityStats() {
                document.getElementById('totalSBTs').textContent = this.tokens.length;
                document.getElementById('totalContributions').textContent = this.activityStats.totalContributions;
                
                // Format last active date
                const lastActiveDate = new Date(this.activityStats.lastActiveDate);
                const formattedDate = lastActiveDate.toLocaleDateString('en-US', {
                    month: 'short',
                    day: 'numeric'
                });
                document.getElementById('lastActive').textContent = formattedDate;
                
                document.getElementById('daysActive').textContent = this.activityStats.daysActiveThisMonth;
            }

            /**
             * Calculate total portfolio value in Web3 tokens (targeting ~75 tokens)
             */
            calculateTotalPortfolioValue() {
                return this.ecoCoins.reduce((total, coin) => {
                    return total + (coin.amount * coin.tokenValue);
                }, 0);
            }

            /**
             * Render eco-contribution coins
             */
            renderEcoCoins() {
                const coinsGrid = document.getElementById('coinsGrid');
                const totalValue = this.calculateTotalPortfolioValue();
                
                // Update total portfolio value in Web3 tokens
                document.getElementById('totalPortfolioValue').innerHTML = `
                    <span class="token-icon">🪙</span>
                    <span>${Math.round(totalValue).toLocaleString()}</span>
                `;
                
                coinsGrid.innerHTML = this.ecoCoins
                    .map(coin => this.createCoinHTML(coin))
                    .join('');
            }

            /**
             * Create HTML for a single coin card
             */
            createCoinHTML(coin) {
                const totalValue = Math.round(coin.amount * coin.tokenValue);
                const changeClass = coin.priceChange >= 0 ? 'positive' : 'negative';
                const changeSymbol = coin.priceChange >= 0 ? '↑' : '↓';
                
                return `
                    <div class="coin-card">
                        <div class="coin-header">
                            <div class="coin-icon">${coin.icon}</div>
                            <div class="coin-info">
                                <div class="coin-name">${coin.name}</div>
                                <div class="coin-amount">${coin.amount.toLocaleString()} ${coin.symbol}</div>
                            </div>
                        </div>
                        <div class="coin-value">
                            <div class="coin-price">
                                <span>🪙</span> ${coin.tokenValue.toFixed(3)}
                                <span class="price-change ${changeClass}">
                                    ${changeSymbol} ${Math.abs(coin.priceChange)}%
                                </span>
                            </div>
                            <div class="coin-total">
                                <span>🪙</span> ${totalValue.toLocaleString()}
                            </div>
                        </div>
                    </div>
                `;
            }

            /**
             * Render all tokens in the grid
             */
            renderTokens() {
                const tokensGrid = document.getElementById('tokensGrid');
                
                tokensGrid.innerHTML = this.tokens
                    .sort((a, b) => new Date(b.dateAcquired) - new Date(a.dateAcquired))
                    .map(token => this.createTokenHTML(token))
                    .join('');
            }

            /**
             * Create HTML for a single token card
             */
            createTokenHTML(token) {
                const formattedDate = new Date(token.dateAcquired).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

                return `
                    <div class="token-card" data-token-id="${token.id}" tabindex="0">
                        <div class="token-header">
                            <div class="token-icon-card">${token.icon}</div>
                            <div class="token-meta">
                                <div class="token-title">${token.title}</div>
                                <div class="token-date">Acquired ${formattedDate}</div>
                            </div>
                        </div>
                        <div class="token-description">${token.description}</div>
                    </div>
                `;
            }

            /**
             * Setup scroll-based animations using IntersectionObserver
             */
            setupScrollAnimations() {
                const observerOptions = {
                    threshold: 0.1,
                    rootMargin: '0px 0px -50px 0px'
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        }
                    });
                }, observerOptions);

                // Observe all token cards
                document.querySelectorAll('.token-card').forEach(card => {
                    observer.observe(card);
                });
            }

            /**
             * Start simulated market updates for coin prices
             */
            startMarketUpdates() {
                setInterval(() => {
                    this.updateCoinPrices();
                }, 30000); // Update every 30 seconds
            }

            /**
             * Simulate market price updates
             */
            updateCoinPrices() {
                this.ecoCoins.forEach(coin => {
                    // Simulate small price changes (-5% to +5%)
                    const changePercent = (Math.random() - 0.5) * 0.1;
                    coin.tokenValue *= (1 + changePercent);
                    coin.priceChange = changePercent * 100;
                });

                this.renderEcoCoins();
            }

            /**
             * Bind event listeners
             */
            bindEvents() {
                // Return button functionality
                document.getElementById('returnBtn').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.handleReturn();
                });

                // Token card interactions
                document.addEventListener('click', (e) => {
                    const tokenCard = e.target.closest('.token-card');
                    if (tokenCard) {
                        const tokenId = parseInt(tokenCard.dataset.tokenId);
                        const token = this.tokens.find(t => t.id === tokenId);
                        if (token) {
                            this.showTokenDetails(token);
                        }
                    }
                });

                // Keyboard accessibility for token cards
                document.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        const tokenCard = e.target.closest('.token-card');
                        if (tokenCard) {
                            e.preventDefault();
                            tokenCard.click();
                        }
                    }
                });
            }

            /**
             * Handle return button click
             */
            handleReturn() {
                // Try to go back in browser history
                if (window.history.length > 1) {
                    window.history.back();
                } else {
                    // Fallback: show message or redirect to default page
                    alert('No previous page found. This would typically return to the main dashboard.');
                }
            }

            /**
             * Show detailed token information
             */
            showTokenDetails(token) {
                const formattedDate = new Date(token.dateAcquired).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                alert(`${token.icon} ${token.title}\n\nAcquired on ${formattedDate}\n\nThis soulbound token represents your permanent contribution to marine conservation and cannot be transferred or sold.`);
            }
        }

        // Initialize the profile when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new CoastalGuardianProfile();
        });
    </script>
</body>
</html>